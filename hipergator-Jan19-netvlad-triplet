/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13.pth.tar
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17.pth.tar
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar
checkpoint_epoch7
Skipping the addition of the PCA layer as /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar already exists.
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch7_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.500
all_recall@5: 0.665
all_recall@10: 0.716
all_recall@20: 0.762
all_map@1: 0.500
all_map@5: 0.315
all_map@10: 0.267
all_map@20: 0.259
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar
checkpoint_epoch3
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch3_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.466
all_recall@5: 0.615
all_recall@10: 0.680
all_recall@20: 0.738
all_map@1: 0.466
all_map@5: 0.289
all_map@10: 0.251
all_map@20: 0.241
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar
checkpoint_epoch16
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch16_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.480
all_recall@5: 0.674
all_recall@10: 0.718
all_recall@20: 0.762
all_map@1: 0.480
all_map@5: 0.319
all_map@10: 0.272
all_map@20: 0.265
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar
model_best
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/model_best_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.473
all_recall@5: 0.668
all_recall@10: 0.730
all_recall@20: 0.768
all_map@1: 0.473
all_map@5: 0.308
all_map@10: 0.268
all_map@20: 0.261
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar
checkpoint_epoch5
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch5_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.499
all_recall@5: 0.668
all_recall@10: 0.711
all_recall@20: 0.758
all_map@1: 0.499
all_map@5: 0.311
all_map@10: 0.268
all_map@20: 0.260
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar
checkpoint_epoch12
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch12_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.473
all_recall@5: 0.668
all_recall@10: 0.730
all_recall@20: 0.768
all_map@1: 0.473
all_map@5: 0.308
all_map@10: 0.268
all_map@20: 0.261
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar
checkpoint_epoch6
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch6_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.476
all_recall@5: 0.654
all_recall@10: 0.708
all_recall@20: 0.757
all_map@1: 0.476
all_map@5: 0.303
all_map@10: 0.261
all_map@20: 0.254
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar
checkpoint_epoch8
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch8_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.486
all_recall@5: 0.666
all_recall@10: 0.720
all_recall@20: 0.764
all_map@1: 0.486
all_map@5: 0.310
all_map@10: 0.266
all_map@20: 0.258
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar
checkpoint_epoch15
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch15_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.480
all_recall@5: 0.676
all_recall@10: 0.719
all_recall@20: 0.759
all_map@1: 0.480
all_map@5: 0.313
all_map@10: 0.269
all_map@20: 0.261
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar
checkpoint_epoch14
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch14_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.492
all_recall@5: 0.676
all_recall@10: 0.734
all_recall@20: 0.765
all_map@1: 0.492
all_map@5: 0.317
all_map@10: 0.273
all_map@20: 0.265
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar
checkpoint_epoch2
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch2_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.431
all_recall@5: 0.592
all_recall@10: 0.666
all_recall@20: 0.732
all_map@1: 0.431
all_map@5: 0.275
all_map@10: 0.239
all_map@20: 0.231
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar
checkpoint_epoch11
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch11_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.493
all_recall@5: 0.669
all_recall@10: 0.722
all_recall@20: 0.769
all_map@1: 0.493
all_map@5: 0.315
all_map@10: 0.272
all_map@20: 0.263
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar
checkpoint_epoch4
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch4_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.488
all_recall@5: 0.639
all_recall@10: 0.693
all_recall@20: 0.742
all_map@1: 0.488
all_map@5: 0.303
all_map@10: 0.260
all_map@20: 0.253
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar
checkpoint_epoch10
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch10_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.496
all_recall@5: 0.676
all_recall@10: 0.724
all_recall@20: 0.766
all_map@1: 0.496
all_map@5: 0.314
all_map@10: 0.271
all_map@20: 0.263
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar
checkpoint_epoch1
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch1_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.415
all_recall@5: 0.582
all_recall@10: 0.636
all_recall@20: 0.704
all_map@1: 0.415
all_map@5: 0.269
all_map@10: 0.231
all_map@20: 0.222
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar
checkpoint_epoch9
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch9_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.478
all_recall@5: 0.669
all_recall@10: 0.723
all_recall@20: 0.765
all_map@1: 0.478
all_map@5: 0.310
all_map@10: 0.267
all_map@20: 0.259
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar
checkpoint_epoch13
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch13_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.497
all_recall@5: 0.673
all_recall@10: 0.723
all_recall@20: 0.768
all_map@1: 0.497
all_map@5: 0.317
all_map@10: 0.274
all_map@20: 0.267
Building PCA Model of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17.pth.tar file...
/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar
checkpoint_epoch17
Adding PCA Layer
Namespace(config_path='patchnetvlad/configs/train.ini', resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17.pth.tar', dataset_root_dir='/home/leo/usman_ws/datasets/mapillary_sls/', dataset_choice='mapillary', threads=6, nocuda=False, vd16_offtheshelf_path=None)
===> Building model
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17.pth.tar'
===> Loading PCA dataset(s)
Exclude panoramas: True
=====> trondheim
=====> london
=====> boston
=====> melbourne
=====> amsterdam
=====> helsinki
=====> tokyo
=====> toronto
=====> saopaulo
=====> moscow
=====> zurich
=====> paris
=====> bangkok
=====> budapest
=====> austin
=====> berlin
=====> ottawa
=====> phoenix
=====> goa
=====> amman
=====> nairobi
=====> manila
===> Do inference to extract features and save them.
====> Extracting Features
Compute 10000 features
===> Compute PCA, takes a while
calculating PCA parameters...
till here
Done
Extracting Features of mapillarysf Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 6315 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarysf Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarysf_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 242 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarysf
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarysf_imageNames_query.txt', index_file_path='mapillarysf_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarysf_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarysf', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 242 images
Parsing dataset...
Done! Found 6315 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarysf/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Extracting Features of mapillarycph Index Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_index.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 12556 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Extracting Features of mapillarycph Query Images
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_file_path='mapillarycph_imageNames_query.txt', dataset_root_dir='/home/leo/usman_ws/datasets/', output_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', nocuda=False, resume_path='/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar')
Parsing dataset...
Done! Found 498 images
=> loading checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar'
=> loaded checkpoint '/home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar'
====> Extracting Features


Done. Finished extracting and saving features
Performing Features Matching and Recall Result of mapillarycph
Namespace(config_path='patchnetvlad/configs/performance.ini', dataset_root_dir='/home/leo/usman_ws/datasets/', query_file_path='mapillarycph_imageNames_query.txt', index_file_path='mapillarycph_imageNames_index.txt', query_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_query', index_input_features_dir='/home/leo/usman_ws/models/patch-netvlad/mapillarycph_index', ground_truth_path=None, result_save_folder='./patchnetvlad/results/mapillarycph', posDistThr=None, nocuda=False)
Parsing dataset...
Done! Found 498 images
Parsing dataset...
Done! Found 12556 images
====> Building faiss index
Writing results to ./patchnetvlad/results/mapillarycph/NetVLAD_predictions.txt
Finished matching features.
No ground truth was provided; not calculating recalls.
Done
Recall Results of /home/leo/usman_ws/models/patchnetvlad/hiperagtor-Jan19/checkpoints/checkpoint_epoch17_WPCA4096.pth.tar file...
Ignoring sequence length 3 for the im2im task. (Setting to 1)
=====> cph
=====> sf
all_recall@1: 0.478
all_recall@5: 0.674
all_recall@10: 0.718
all_recall@20: 0.762
all_map@1: 0.478
all_map@5: 0.312
all_map@10: 0.269
all_map@20: 0.261
